(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{176:function(e,a,t){e.exports=t(315)},181:function(e,a,t){},182:function(e,a,t){},315:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),o=t.n(l),c=(t(181),t(182),t(35)),i=t(40),m=t(32),u=t(14),s=t(392),p=t(371),d=t(368),E=t(386),g=t(370),h=t(390),f=t(364),v=t(317),b=t(387),w=t(367),y=t(154),S=t.n(y),x=t(56),k=t(365),O=t(107),j=t.n(O),C=t(388);function N(){return r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(f.a,{color:"inherit",href:"http://steven-luong.com"},"Steven Luong")," ",(new Date).getFullYear(),".")}var B=Object(k.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),I=function(e){var a=e.baseUrl,t=Object(m.useOktaAuth)(),n=(t.authState,t.authService),l=B(),o=r.a.useState(null),c=Object(u.a)(o,2),i=c[0],y=c[1],k=r.a.useState(null),O=Object(u.a)(k,2),I=O[0],D=O[1],H=r.a.useState(""),F=Object(u.a)(H,2),L=F[0],P=F[1],T=r.a.useState(""),R=Object(u.a)(T,2),A=R[0],U=R[1],W=I?r.a.createElement(C.a,{severity:"error"},I.message):null;return i?(n.redirect({sessionToken:i}),null):r.a.createElement(w.a,{container:!0,component:"main",className:l.root},r.a.createElement(d.a,null),r.a.createElement(w.a,{item:!0,xs:!1,sm:4,md:7,className:l.image}),r.a.createElement(w.a,{item:!0,xs:12,sm:8,md:5,component:v.a,elevation:6,square:!0},r.a.createElement("div",{className:l.paper},r.a.createElement(s.a,{className:l.avatar},r.a.createElement(S.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:l.form,noValidate:!0},W,r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){P(e.target.value)}}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){U(e.target.value)}}),r.a.createElement(g.a,{control:r.a.createElement(h.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(p.a,{fullWidth:!0,variant:"contained",color:"primary",className:l.submit,onClick:function(e){e.preventDefault(),console.log("signin"),new j.a({url:a}).signIn({username:L,password:A}).then((function(e){y(e.sessionToken)})).catch((function(e){console.log("Found an error",e),D(e)}))}},"Sign In"),r.a.createElement(w.a,{container:!0},r.a.createElement(w.a,{item:!0,xs:!0},r.a.createElement(f.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(w.a,{item:!0},r.a.createElement(f.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(b.a,{mt:5},r.a.createElement(N,null))))))},D=t(11),H=t(155),F=t(3),L=t(391),P=t(377),T=t(378),R=t(369),A=t(380),U=t(366),W=t(379),q=t(385),z=t(157),G=t.n(z),J=t(159),K=t.n(J),V=t(158),X=t.n(V);function Y(e){return r.a.createElement(x.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}var M=Object(k.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}}}));function $(){var e=M();return r.a.createElement(v.a,{className:e.paper},r.a.createElement(Y,null,"Profile"),r.a.createElement("p",null,"Email :"))}function _(e){var a={};e.news.map((function(e){return e.title.split(" ").map((function(e){return a[e]=e in a?a[e]+1:1,a[e]}))}));var t=[];for(var n in a)n.length>4&&t.push({word:n,count:a[n]});t.sort((function(e,a){return a.count-e.count}));for(var l=[],o=0;o<20;o++)if(t[o]&&t[o].count>1){var c=t[o].word,i=t[o].count;l.push(r.a.createElement("span",{key:o},r.a.createElement(f.a,{href:"/#"},c)," (",i,") "))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null,"Keywords"),r.a.createElement("p",null,l))}var Q=t(156),Z=t.n(Q);function ee(e){e.preventDefault()}var ae=Object(k.a)({depositContext:{flex:1}});function te(){var e=ae();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null,"21/03/2020"),r.a.createElement(x.a,{color:"textSecondary",className:e.depositContext},"Updated on 21/03/2020 09:00"),r.a.createElement("div",null,r.a.createElement(p.a,{color:"primary",variant:"contained",href:"#",onClick:ee},r.a.createElement(Z.a,null)),r.a.createElement(p.a,{color:"primary",variant:"contained",href:"#",onClick:ee},"Today")))}var ne=t(372),re=t(376),le=t(375),oe=t(373),ce=t(374);function ie(e){var a=e.news.sort((function(e,a){return new Date(a.datetime)-new Date(e.datetime)}));return console.log(a),r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{id:"news"},"News"),r.a.createElement(ne.a,{size:"small"},r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"Image"),r.a.createElement(le.a,null,"Time"),r.a.createElement(le.a,null,"Source"),r.a.createElement(le.a,null,"Title"))),r.a.createElement(re.a,null,a.map((function(e){return r.a.createElement(ce.a,{key:e.guid},r.a.createElement(le.a,null,r.a.createElement("img",{src:e.image_link,height:"40",width:"40",alt:""})),r.a.createElement(le.a,null,e.datetime),r.a.createElement(le.a,null,e.source),r.a.createElement(le.a,null,r.a.createElement(f.a,{href:e.link},e.title," ")))})))))}var me=Object(k.a)((function(e){return{title:{flexGrow:1},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:150}}}));function ue(e){var a=e.news,t=me(),n=Object(F.a)(t.paper,t.fixedHeight);return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{container:!0,direction:"row",spacing:3},r.a.createElement(w.a,{item:!0,xs:7,md:12,lg:9},r.a.createElement(v.a,{className:t.paper},r.a.createElement(_,{news:a}))),r.a.createElement(w.a,{item:!0,xs:5,md:12,lg:3},r.a.createElement(v.a,{className:n},r.a.createElement(te,null)))),r.a.createElement("br",null),r.a.createElement(w.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(v.a,{className:t.paper},r.a.createElement(ie,{news:a}))))}var se=t(381),pe=t(382),de=t(383),Ee=t(384),ge=t(163),he=t.n(ge),fe=t(164),ve=t.n(fe),be=t(162),we=t.n(be),ye=t(160),Se=t.n(ye),xe=t(161),ke=t.n(xe);function Oe(e){var a=new Date;a.setHours(0,0,0,0);var t=a.toISOString();console.log("s:"+t);var n=new Date;n.setHours(23,59,59,999);var r=n.toISOString();console.log("e:"+r),fetch("https://apollo-loopback.slapps.fr/api/News?filter[where][and][0][datetime][gt]="+t+"&filter[where][and][1][datetime][lt]="+r).then((function(e){return e.json()})).then((function(a){console.log(a);var t=[];a.forEach((function(e){-1!==["Challenges","JDG","The Verge","Korben","LifeHacker"].indexOf(e.source)&&t.push(e)})),e(t)}))}function je(){return r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(f.a,{color:"inherit",href:"http://steven-luong.com/"},"Steven Luong")," ",(new Date).getFullYear(),".")}var Ce=Object(k.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(H.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(D.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeight:{height:150}}}));function Ne(e){var a=e.url,t=Object(m.useOktaAuth)(),n=t.authState,l=t.authService,o=Ce(),s=r.a.useState(!0),p=Object(u.a)(s,2),E=p[0],g=p[1],h=r.a.useState(!1),f=Object(u.a)(h,2),v=f[0],w=f[1],y=r.a.useState([]),S=Object(u.a)(y,2),k=S[0],O=S[1];Object(F.a)(o.paper,o.fixedHeight);if(console.log(n.isAuthenticated),n.isPending)return r.a.createElement("div",null,"Loading...");if(!n.isAuthenticated)return r.a.createElement(i.c,{to:{pathname:"/login"}});v||(Oe(O),w(!0)),console.log(a);var j=null;return"profile"===a&&(j=r.a.createElement($,null)),"dashboard"===a&&(j=r.a.createElement(ue,{news:k})),r.a.createElement("div",{className:o.root},r.a.createElement(d.a,null),r.a.createElement(P.a,{position:"absolute",className:Object(F.a)(o.appBar,E&&o.appBarShift)},r.a.createElement(T.a,{className:o.toolbar},r.a.createElement(U.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){g(!0)},className:Object(F.a)(o.menuButton,E&&o.menuButtonHidden)},r.a.createElement(G.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:o.title},"Apollo - News aggregator"),r.a.createElement(U.a,{color:"inherit"},r.a.createElement(W.a,{badgeContent:4,color:"secondary"},r.a.createElement(X.a,null))))),r.a.createElement(L.a,{variant:"permanent",classes:{paper:Object(F.a)(o.drawerPaper,!E&&o.drawerPaperClose)},open:E},r.a.createElement("div",{className:o.toolbarIcon},r.a.createElement(U.a,{onClick:function(){g(!1)}},r.a.createElement(K.a,null))),r.a.createElement(A.a,null),r.a.createElement(R.a,null,r.a.createElement("div",null,r.a.createElement(c.Link,{to:"/"},r.a.createElement(se.a,{button:!0},r.a.createElement(pe.a,null,r.a.createElement(Se.a,null)),r.a.createElement(de.a,{primary:"Dashboard"}))),r.a.createElement(se.a,{button:!0},r.a.createElement(pe.a,null,r.a.createElement(ke.a,null)),r.a.createElement(de.a,{primary:"Topics"})))),r.a.createElement(A.a,null),r.a.createElement(R.a,null,r.a.createElement("div",null,r.a.createElement(Ee.a,{inset:!0},"Settings"),r.a.createElement(se.a,{button:!0},r.a.createElement(pe.a,null,r.a.createElement(we.a,null)),r.a.createElement(de.a,{primary:"Sources"})),r.a.createElement(c.Link,{to:"/profile"},r.a.createElement(se.a,{button:!0},r.a.createElement(pe.a,null,r.a.createElement(he.a,null)),r.a.createElement(de.a,{primary:"Profile"}))))),r.a.createElement(A.a,null),r.a.createElement(R.a,null,r.a.createElement("div",null,r.a.createElement(se.a,{button:!0,onClick:function(){l.logout()}},r.a.createElement(pe.a,null,r.a.createElement(ve.a,null)),r.a.createElement(de.a,{primary:"Log out"}))))),r.a.createElement("main",{className:o.content},r.a.createElement("div",{className:o.appBarSpacer}),r.a.createElement(q.a,{maxWidth:"lg",className:o.container},j,r.a.createElement(b.a,{pt:4},r.a.createElement(je,null)))))}var Be={url:"https://dev-607424.okta.com",issuer:"https://dev-607424.okta.com/oauth2/default",redirectUri:window.location.origin+"/implicit/callback",clientId:"0oa4pyl2rJXBC6sHH4x6",pkce:!0},Ie=function(){var e=Object(i.k)();return r.a.createElement(m.Security,{issuer:Be.issuer,clientId:Be.clientId,redirectUri:Be.redirectUri,onAuthRequired:function(){e.push("/login")},pkce:!0},r.a.createElement(m.SecureRoute,{path:"/",exact:!0,render:function(){return r.a.createElement(Ne,{url:"dashboard"})}}),r.a.createElement(i.d,{path:"/login",render:function(){return r.a.createElement(I,{baseUrl:Be.url})}}),r.a.createElement(i.d,{path:"/implicit/callback",component:m.LoginCallback}),r.a.createElement(m.SecureRoute,{path:"/profile",render:function(){return r.a.createElement(Ne,{url:"profile"})}}))},De=function(){return r.a.createElement(c.BrowserRouter,null,r.a.createElement(Ie,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[176,1,2]]]);
//# sourceMappingURL=main.56b67470.chunk.js.map